<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
  </head>

  <body>
    <button>点击</button>
    <script>
      // 函数的不同调用方式决定了this 的指向不同，一般指向调用者
      //  constructor (构造函数)里面的this指向实例对象, 方法里面的this 指向这个方法的调用者

      // 1. 普通函数 this 指向window
      function fn() {
        console.log('普通函数的this' + this)
      }
      window.fn()

      // 2. 立即执行函数 this还是指向window
      ;(function () {
        console.log('立即执行函数的this' + this)
      })()

      // 3. 箭头函数的this指向，和箭头函数所在作用域中的this指向一样。注意对象是不能产生作用域的
      function fn2() {
        console.log(this)
        // 这里的箭头函数被定义在fn()函数中，所以箭头函数中的this和fn()中的this指向一样，都是obj对象
        return () => {
          console.log(this)
        }
      }

      // 4. 定时器函数 this 指向的也是window
      window.setTimeout(function () {
        console.log('定时器的this:' + this)
      }, 1000)

      // 5. 对象的方法 this指向的是对象 o
      var o = {
        sayHi: function () {
          console.log('对象方法的this:' + this)
        }
      }
      o.sayHi()

      // 6. 构造函数 this 指向ldh这个实例对象 原型对象里面的this指向的也是ldh这个实例对象
      function Star() {}
      Star.prototype.sing = function () {}
      var ldh = new Star()

      // 7. 绑定事件函数 this 指向的是函数的调用者 btn这个按钮对象
      var btn = document.querySelector('button')
      btn.onclick = function () {
        console.log('绑定时间函数的this:' + this)
      }
    </script>
  </body>
</html>
