<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // new的执行过程
      // 1. new 构造函数可以在内存中创建了一个空的对象 obj = {}
      // 2. obj对象的__proto__指向构造函数的原型对象：obj.__proto__ = con.prototype
      // 3. 将构造函数的this 指向刚才创建的空对象obj
      // 4. 执行构造函数里面的代码 给这个空对象obj添加属性和方法，得到返回结果res
      // 5. 如果res是对象，则返回res对象。否则返回创建的对象obj
      // 即如果构造函数返回的是一个指定对象的话，就返回指定对象。否则返回刚刚创建的对象obj

      // con代表构造函数
      function myNew(con, ...args) {
        // Object.create() 方法用于创建一个新对象，使用现有的对象来作为新创建对象的原型（prototype）
        let newObj = Object.create(con.prototype)
        let res = con.apply(newObj, args)
        return typeof res == 'object' && res !== null ? res : newObj
      }
    </script>
  </body>
</html>
